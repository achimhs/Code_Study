<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        const URL = 'https://jsonplaceholder.typicode.com/todos/1';

        //1. ajax로 받아오는 코드
        // const xhr = new XMLHttpRequest();
        // xhr.open("GET", URL);
        // xhr.send();

        // const response = xhr.response;
        // console.log(response);//기다려주지 않으니 실행x

        // xhr.onload = function () {
        //     if (xhr.status == 200) {
        //         const response = xhr.response;
        //         console.log(response);//언제 호출될 지 모르지=>그래서 promise쓰는거임
        //     }
        // }

        // // 2. promise로 받아오는 코드
        // const promise = axios.get(URL);

        // console.log("promise출력", promise);

        // promise
        //     .then((response) => {
        //         console.log("response출력", response);
        //         return response.data;
        //     })
        //     .then((data) => {
        //         console.log("data출력", data);
        //         return data.title;
        //     })
        //     .then((title) => {
        //         console.log("title출력", title);
        //     })
        //     .catch((error) => {
        //         console.log(error);
        //     })
        //     .finally(() => {
        //         console.log("실행완료");
        //     })

        // 3. axios로 바로 받아오는 코드


        //2.axios
        axios.get(URL)//promise 변수를 따로 받을필요x axios.get자체가 promise객체 받아옴
            .then((response) => {
                console.log("response출력", response);
                return response.data[4].id;
            })
            .then((id) => {
                console.log("id출력", id);
                return axios.get(`${URL}/${id}`);
            })
            .then((realURL) => {
                console.log("title출력", realURL.data.title);
            })
            .catch((error) => {
                console.log(error);
            })
            .finally(() => {
                console.log("실행완료");
            })


    // 4. axios의 async와 await로 구현하는 방법
    // async function getTodo(URL) {
    // const response = await axios.get(URL);
    // console.log(response);
    // const id = response.data[4].id;
    // const realURL = await axios.get(`${URL}/${id}`);
    // console.log(realURL);
    // console.log(realURL.data.title);
    // }
    // getTodo(URL);
    </script>
</head>

<body>

</body>

</html>