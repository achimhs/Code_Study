<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>소문</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        // 1.then지옥에서 탈출하는 방식
        // const URL = "https://jsonplaceholder.typicode.com/todos";
        // async function getInfo(URL) {
        //     const response = await axios.get(URL);
        //     console.log(response);
        //     const id = response.data[4].id;
        //     const realURL = await axios.get(`${URL}/${id}`);
        //     console.log(realURL);
        //     console.log(realURL.data.title);
        // }

        // getInfo(URL);

        // 2.순수 ajax
        // const URL = "https://jsonplaceholder.typicode.com/todos/1";
        // const xhr = new XMLHttpRequest();
        // xhr.open('GET', URL);
        // xhr.send();

        // const response = xhr.response;
        // console.log(response);

        // xhr.onload = function () {
        //     if (xhr.status == 200) {
        //         const response = xhr.response;
        //         console.log(response);
        //     }
        // }

        // 3.axios의 promise를 사용하여 구현
        // const URL = "https://jsonplaceholder.typicode.com/todos/1";
        // const promise = axios.get(URL);
        // console.log("promise출력", promise);

        // promise
        //     .then((response) => {
        //         console.log("response출력", response);
        //         return response.data;
        //     })
        //     .then((data) => {
        //         console.log("data출력", data);
        //         return data.title;
        //     })
        //     .then((title) => {
        //         console.log("title출력", title);
        //     })
        //     .catch((error) => {
        //         console.log(error);
        //     })
        //     .finally(() => {
        //         console.log("실행완료");
        //     })

        // 4. promise 변수를 따로 선언하지 않는 axios
        const URL = "https://jsonplaceholder.typicode.com/todos/1";

        axios.get(URL)
            .then((response) => {
                console.log("response출력", response);
                return response.data[4].id;
            })
            .then((id) => {
                console.log("id출력", id);
                return axios.get(`${URL}/${id}`);
            })
            // .then((realURL) => {
            //     console.log("title출력", realURL);
            // })
            .catch((error) => {
                console.log(error);
            })
            .finally(() => {
                console.log("실행완료");
            })


    </script>
</head>

<body>

</body>

</html>